(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5743:(e,t,a)=>{Promise.resolve().then(a.bind(a,6014))},6014:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eB});var s=a(2199),n=a(1855),r=a(597),i=a(9628),l=a(8473),d=a(3685);let o=JSON.parse('[{"inputs":[{"internalType":"uint256","name":"_initialCreationFee","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"InsufficientBalance","type":"error"},{"inputs":[{"internalType":"string","name":"message","type":"string"}],"name":"InvalidInput","type":"error"},{"inputs":[],"name":"TransferFailed","type":"error"},{"inputs":[],"name":"Unauthorized","type":"error"},{"inputs":[],"name":"WillAlreadyExecuted","type":"error"},{"inputs":[],"name":"WillNotActive","type":"error"},{"inputs":[],"name":"WillNotExist","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"willId","type":"uint256"},{"indexed":true,"internalType":"address","name":"beneficiary","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"AssetTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"willId","type":"uint256"},{"indexed":true,"internalType":"address","name":"confirmer","type":"address"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"ExecutionConditionConfirmed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"willId","type":"uint256"},{"indexed":true,"internalType":"address","name":"newExecutor","type":"address"}],"name":"ExecutorChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"willId","type":"uint256"},{"indexed":true,"internalType":"address","name":"depositor","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"FundsDeposited","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"willId","type":"uint256"},{"indexed":true,"internalType":"address","name":"testator","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"FundsWithdrawnByTestator","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"willId","type":"uint256"},{"indexed":true,"internalType":"address","name":"testator","type":"address"},{"indexed":true,"internalType":"address","name":"executor","type":"address"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"WillCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"willId","type":"uint256"},{"indexed":true,"internalType":"address","name":"testator","type":"address"}],"name":"WillDeactivated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"willId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"totalDistributed","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"WillExecuted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"willId","type":"uint256"},{"indexed":true,"internalType":"address","name":"testator","type":"address"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"WillUpdated","type":"event"},{"inputs":[{"internalType":"uint256","name":"_willId","type":"uint256"}],"name":"confirmExecutionCondition","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_description","type":"string"},{"internalType":"address","name":"_executor","type":"address"},{"internalType":"address[]","name":"_beneficiaryAddresses","type":"address[]"},{"internalType":"uint256[]","name":"_sharePercentages","type":"uint256[]"}],"name":"createWill","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"creationFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_willId","type":"uint256"}],"name":"deactivateWill","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_willId","type":"uint256"}],"name":"depositToWill","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_willId","type":"uint256"}],"name":"executeWill","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_willId","type":"uint256"}],"name":"getWillBeneficiaries","outputs":[{"components":[{"internalType":"address payable","name":"beneficiaryAddress","type":"address"},{"internalType":"uint256","name":"sharePercentage","type":"uint256"}],"internalType":"struct WillTransferV2.Beneficiary[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_willId","type":"uint256"}],"name":"getWillDetails","outputs":[{"internalType":"address","name":"testator","type":"address"},{"internalType":"uint256","name":"creationTimestamp","type":"uint256"},{"internalType":"string","name":"description","type":"string"},{"internalType":"bool","name":"isActive","type":"bool"},{"internalType":"bool","name":"isExecuted","type":"bool"},{"internalType":"address","name":"executor","type":"address"},{"internalType":"bool","name":"isExecutionConfirmed","type":"bool"},{"internalType":"uint256","name":"totalBalance","type":"uint256"},{"components":[{"internalType":"address payable","name":"beneficiaryAddress","type":"address"},{"internalType":"uint256","name":"sharePercentage","type":"uint256"}],"internalType":"struct WillTransferV2.Beneficiary[]","name":"beneficiaries_","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_executor","type":"address"}],"name":"getWillsByExecutor","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_testator","type":"address"}],"name":"getWillsByTestator","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"nextWillId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_newFee","type":"uint256"}],"name":"setCreationFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_willId","type":"uint256"},{"internalType":"address","name":"_newExecutor","type":"address"}],"name":"setExecutor","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"wills","outputs":[{"internalType":"address","name":"testator","type":"address"},{"internalType":"uint256","name":"creationTimestamp","type":"uint256"},{"internalType":"string","name":"description","type":"string"},{"internalType":"bool","name":"isActive","type":"bool"},{"internalType":"bool","name":"isExecuted","type":"bool"},{"internalType":"address","name":"executor","type":"address"},{"internalType":"bool","name":"isExecutionConfirmed","type":"bool"},{"internalType":"uint256","name":"totalBalance","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdrawFees","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_willId","type":"uint256"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"withdrawFromWill","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}]'),c={chainId:"0x45a",chainName:"Core Blockchain TestNet",rpcUrls:["https://rpc.test2.btcs.network"],nativeCurrency:{name:"tCORE2",symbol:"tCORE2",decimals:18},blockExplorerUrls:["https://scan.test2.btcs.network"]},u=(0,n.createContext)(void 0),m=()=>{let e=(0,n.useContext)(u);if(void 0===e)throw Error("useWeb3 must be used within a Web3Provider");return e},x=e=>{let{children:t}=e,[a,m]=(0,n.useState)(null),[x,p]=(0,n.useState)(null),[f,y]=(0,n.useState)(null),[h,g]=(0,n.useState)(null),[w,b]=(0,n.useState)("0"),[j,N]=(0,n.useState)("0"),[v,k]=(0,n.useState)(!1),[C,T]=(0,n.useState)(!1),E=async e=>{try{let t=await e.getNetwork(),a=1114n===t.chainId;return k(a),a}catch(e){return console.error("Error checking network:",e),k(!1),!1}},A=async()=>{if(!window.ethereum){d.oR.error("MetaMask is not installed");return}try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:c.chainId}]}),d.oR.success("Switched to tCORE Testnet")}catch(e){if(4902===e.code)try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[c]}),d.oR.success("Added and switched to tCORE Testnet")}catch(e){console.error("Error adding network:",e),d.oR.error("Failed to add tCORE Testnet")}else console.error("Error switching network:",e),d.oR.error("Failed to switch network")}},R=async()=>{if(a&&h)try{let e=await a.getBalance(h);b(r.ck(e))}catch(e){console.error("Error fetching balance:",e)}},W=async()=>{if(!window.ethereum){d.oR.error("MetaMask is not installed");return}T(!0);try{let e=new i.k(window.ethereum);await e.send("eth_requestAccounts",[]);let t=await e.getSigner(),a=await t.getAddress();if(m(e),p(t),g(a),await E(e)){let s=new l.NZ("0xedcc4ddbedb4905834a09d50bb820c5f68fbb260",o,t);y(s);try{let e=await s.creationFee();N(r.ck(e))}catch(e){console.error("Error fetching creation fee:",e)}let n=await e.getBalance(a);b(r.ck(n)),d.oR.success("Wallet connected successfully")}else d.oR.error("Please switch to tCORE Testnet")}catch(e){console.error("Error connecting wallet:",e),d.oR.error("Failed to connect wallet")}finally{T(!1)}},F=()=>{m(null),p(null),y(null),g(null),b("0"),N("0"),k(!1),d.oR.success("Wallet disconnected")};return(0,n.useEffect)(()=>(window.ethereum&&(window.ethereum.on("accountsChanged",e=>{0===e.length?F():W()}),window.ethereum.on("chainChanged",()=>{window.location.reload()})),()=>{window.ethereum&&(window.ethereum.removeAllListeners("accountsChanged"),window.ethereum.removeAllListeners("chainChanged"))}),[]),(0,s.jsx)(u.Provider,{value:{provider:a,signer:x,contract:f,account:h,balance:w,creationFee:j,isCorrectNetwork:v,isConnecting:C,connectWallet:W,disconnectWallet:F,switchToTCoreTestnet:A,refreshBalance:R},children:t})};var p=a(8529),f=a(7656),y=a(54),h=a(7799);function g(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,h.QP)((0,y.$)(t))}let w=(0,f.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),b=n.forwardRef((e,t)=>{let{className:a,variant:n,size:r,asChild:i=!1,...l}=e,d=i?p.DX:"button";return(0,s.jsx)(d,{className:g(w({variant:n,size:r,className:a})),ref:t,...l})});b.displayName="Button";var j=a(2799),N=a(6683),v=a(8231),k=a(3761);let C=j.bL,T=j.l9;j.YJ,j.ZL,j.Pb,j.z6,n.forwardRef((e,t)=>{let{className:a,inset:n,children:r,...i}=e;return(0,s.jsxs)(j.ZP,{ref:t,className:g("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",a),...i,children:[r,(0,s.jsx)(N.A,{className:"ml-auto"})]})}).displayName=j.ZP.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(j.G5,{ref:t,className:g("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})}).displayName=j.G5.displayName;let E=n.forwardRef((e,t)=>{let{className:a,sideOffset:n=4,...r}=e;return(0,s.jsx)(j.ZL,{children:(0,s.jsx)(j.UC,{ref:t,sideOffset:n,className:g("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})});E.displayName=j.UC.displayName;let A=n.forwardRef((e,t)=>{let{className:a,inset:n,...r}=e;return(0,s.jsx)(j.q7,{ref:t,className:g("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",a),...r})});A.displayName=j.q7.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,checked:r,...i}=e;return(0,s.jsxs)(j.H_,{ref:t,className:g("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:r,...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(j.VF,{children:(0,s.jsx)(v.A,{className:"h-4 w-4"})})}),n]})}).displayName=j.H_.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,...r}=e;return(0,s.jsxs)(j.hN,{ref:t,className:g("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(j.VF,{children:(0,s.jsx)(k.A,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=j.hN.displayName,n.forwardRef((e,t)=>{let{className:a,inset:n,...r}=e;return(0,s.jsx)(j.JU,{ref:t,className:g("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",a),...r})}).displayName=j.JU.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(j.wv,{ref:t,className:g("-mx-1 my-1 h-px bg-muted",a),...n})}).displayName=j.wv.displayName;var R=a(4736),W=a(5939),F=a(2433),_=a(9385),S=a(9928);function D(){let{account:e,isConnecting:t,isCorrectNetwork:a,connectWallet:n,disconnectWallet:r,switchToTCoreTestnet:i,refreshBalance:l}=m();return e?(0,s.jsxs)(C,{children:[(0,s.jsx)(T,{asChild:!0,children:(0,s.jsxs)(b,{variant:"outline",className:"flex items-center space-x-2",children:[(0,s.jsx)(R.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Wallet"}),(0,s.jsx)(W.A,{className:"w-4 h-4"})]})}),(0,s.jsxs)(E,{align:"end",className:"w-48",children:[!a&&(0,s.jsxs)(A,{onClick:i,children:[(0,s.jsx)(F.A,{className:"w-4 h-4 mr-2"}),"Switch to tCORE Testnet"]}),(0,s.jsxs)(A,{onClick:l,children:[(0,s.jsx)(_.A,{className:"w-4 h-4 mr-2"}),"Refresh Balance"]}),(0,s.jsxs)(A,{onClick:r,children:[(0,s.jsx)(S.A,{className:"w-4 h-4 mr-2"}),"Disconnect"]})]})]}):(0,s.jsxs)(b,{onClick:n,disabled:t,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:[(0,s.jsx)(R.A,{className:"w-4 h-4 mr-2"}),t?"Connecting...":"Connect Wallet"]})}let I=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:g("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});I.displayName="Card";let B=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:g("flex flex-col space-y-1.5 p-6",a),...n})});B.displayName="CardHeader";let M=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:g("text-2xl font-semibold leading-none tracking-tight",a),...n})});M.displayName="CardTitle",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:g("text-sm text-muted-foreground",a),...n})}).displayName="CardDescription";let O=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:g("p-6 pt-0",a),...n})});O.displayName="CardContent",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:g("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter";let z=(0,f.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function P(e){let{className:t,variant:a,...n}=e;return(0,s.jsx)("div",{className:g(z({variant:a}),t),...n})}var L=a(485),U=a(2459),V=a(953),q=a(572),J=a(1055);function Y(){let{setTheme:e}=(0,J.D)();return(0,s.jsxs)(C,{children:[(0,s.jsx)(T,{asChild:!0,children:(0,s.jsxs)(b,{variant:"outline",size:"icon",className:"rounded-full",children:[(0,s.jsx)(V.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,s.jsx)(q.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,s.jsxs)(E,{align:"end",children:[(0,s.jsx)(A,{onClick:()=>e("light"),children:"Light"}),(0,s.jsx)(A,{onClick:()=>e("dark"),children:"Dark"}),(0,s.jsx)(A,{onClick:()=>e("system"),children:"System"})]})]})}function Z(){let{account:e,balance:t,creationFee:a,isCorrectNetwork:n}=m();return(0,s.jsx)("header",{className:"border-b bg-white/80 dark:bg-gray-900/90 backdrop-blur-sm sticky top-0 z-50",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 dark:from-gray-600 dark:to-gray-800 rounded-lg flex items-center justify-center",children:(0,s.jsx)(L.A,{className:"w-5 h-5 text-white"})}),(0,s.jsx)("span",{className:"text-xl font-bold text-slate-900 dark:text-gray-100",children:"Will Transfer DAO"})]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[e&&(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(I,{className:"bg-slate-50 dark:bg-gray-900 border-slate-200 dark:border-gray-800",children:(0,s.jsx)(O,{className:"px-3 py-2",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(F.A,{className:"w-4 h-4 text-slate-500"}),(0,s.jsx)(P,{variant:n?"default":"destructive",className:"text-xs",children:n?"tCORE Testnet":"Wrong Network"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(R.A,{className:"w-4 h-4 text-slate-500"}),(0,s.jsx)("span",{className:"font-mono text-slate-700 dark:text-gray-300",children:"".concat(e.slice(0,6),"...").concat(e.slice(-4))})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(U.A,{className:"w-4 h-4 text-slate-500"}),(0,s.jsxs)("span",{className:"font-medium text-slate-700 dark:text-gray-300",children:[Number.parseFloat(t).toFixed(4)," tCORE2"]})]})]})})}),"0"!==a&&(0,s.jsx)(I,{className:"bg-blue-50 dark:bg-gray-800 border-blue-200 dark:border-gray-700",children:(0,s.jsx)(O,{className:"px-3 py-2",children:(0,s.jsx)("div",{className:"text-sm text-blue-700 dark:text-gray-300",children:(0,s.jsxs)("span",{className:"font-medium",children:["Creation Fee: ",a," tCORE2"]})})})})]}),(0,s.jsx)(Y,{}),(0,s.jsx)(D,{})]})]})})})}let H=n.forwardRef((e,t)=>{let{className:a,type:n,...r}=e;return(0,s.jsx)("input",{type:n,className:g("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});H.displayName="Input";let G=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("textarea",{className:g("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});G.displayName="Textarea";var $=a(9356);let Q=(0,f.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),X=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)($.b,{ref:t,className:g(Q(),a),...n})});X.displayName=$.b.displayName;var K=a(6622),ee=a(3171),et=a(6581),ea=a(8226),es=a(4937);function en(){let{contract:e,account:t,isCorrectNetwork:a,creationFee:i}=m(),[l,o]=(0,n.useState)(""),[c,u]=(0,n.useState)(""),[x,p]=(0,n.useState)([{address:"",share:0}]),[f,y]=(0,n.useState)(!1),h=e=>{x.length>1&&p(x.filter((t,a)=>a!==e))},g=(e,t,a)=>{let s=[...x];s[e]={...s[e],[t]:a},p(s)},w=()=>{if(!l.trim())return d.oR.error("Please enter a will description"),!1;if(!es.PW(c))return d.oR.error("Please enter a valid executor address"),!1;if(c.toLowerCase()===(null==t?void 0:t.toLowerCase()))return d.oR.error("Executor cannot be the same as the testator"),!1;for(let e=0;e<x.length;e++){let t=x[e];if(!es.PW(t.address))return d.oR.error("Please enter a valid address for beneficiary ".concat(e+1)),!1;if(t.share<=0||t.share>100)return d.oR.error("Beneficiary ".concat(e+1," share must be between 1 and 100")),!1}let e=x.reduce((e,t)=>e+t.share,0);return 100===e||(d.oR.error("Total shares must equal 100% (currently ".concat(e,"%)")),!1)},j=async s=>{if(s.preventDefault(),!e||!t||!a){d.oR.error("Please connect your wallet and switch to tCORE Testnet");return}if(w()){y(!0);try{let t=x.map(e=>e.address),a=x.map(e=>e.share),s=await e.createWill(l,c,t,a,{value:r.g5(i)});d.oR.loading("Creating will...",{id:"create-will"}),await s.wait(),d.oR.success("Will created successfully!",{id:"create-will"}),o(""),u(""),p([{address:"",share:0}])}catch(e){console.error("Error creating will:",e),d.oR.error(e.reason||"Failed to create will",{id:"create-will"})}finally{y(!1)}}},N=x.reduce((e,t)=>e+t.share,0);return(0,s.jsxs)(I,{className:"max-w-2xl mx-auto",children:[(0,s.jsx)(B,{children:(0,s.jsxs)(M,{className:"flex items-center gap-2",children:[(0,s.jsx)(L.A,{className:"w-5 h-5"}),"Create New Will"]})}),(0,s.jsx)(O,{children:(0,s.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(X,{htmlFor:"description",children:"Will Description"}),(0,s.jsx)(G,{id:"description",placeholder:"Describe the purpose and details of this will...",value:l,onChange:e=>o(e.target.value),rows:4,className:"resize-none"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(X,{htmlFor:"executor",className:"flex items-center gap-2",children:[(0,s.jsx)(K.A,{className:"w-4 h-4"}),"Executor Address"]}),(0,s.jsx)(H,{id:"executor",placeholder:"0x...",value:c,onChange:e=>u(e.target.value),className:"font-mono"}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"The executor will be responsible for confirming and executing this will."})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(X,{className:"flex items-center gap-2",children:[(0,s.jsx)(ee.A,{className:"w-4 h-4"}),"Beneficiaries"]}),(0,s.jsxs)(b,{type:"button",variant:"outline",size:"sm",onClick:()=>{p([...x,{address:"",share:0}])},className:"flex items-center gap-2",children:[(0,s.jsx)(et.A,{className:"w-4 h-4"}),"Add Beneficiary"]})]}),(0,s.jsx)("div",{className:"space-y-3",children:x.map((e,t)=>(0,s.jsx)(I,{className:"p-4 bg-slate-50 dark:bg-gray-900",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(X,{className:"text-sm",children:"Address"}),(0,s.jsx)(H,{placeholder:"0x...",value:e.address,onChange:e=>g(t,"address",e.target.value),className:"font-mono"})]}),(0,s.jsxs)("div",{className:"w-24",children:[(0,s.jsx)(X,{className:"text-sm",children:"Share %"}),(0,s.jsx)(H,{type:"number",min:"1",max:"100",placeholder:"0",value:e.share||"",onChange:e=>g(t,"share",Number.parseInt(e.target.value)||0)})]}),x.length>1&&(0,s.jsx)(b,{type:"button",variant:"outline",size:"icon",onClick:()=>h(t),className:"mt-6",children:(0,s.jsx)(ea.A,{className:"w-4 h-4"})})]})},t))}),(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-slate-100 dark:bg-gray-800 rounded-lg",children:[(0,s.jsx)("span",{className:"font-medium",children:"Total Shares:"}),(0,s.jsxs)("span",{className:"font-bold ".concat(100===N?"text-green-600":"text-red-600"),children:[N,"%"]})]})]}),(0,s.jsxs)("div",{className:"pt-4 border-t",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,s.jsxs)("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:["Creation Fee: ",i," tCORE2"]})}),(0,s.jsx)(b,{type:"submit",disabled:f||!t||!a||100!==N,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:f?"Creating Will...":"Create Will"})]})]})})]})}var er=a(4166),ei=a(5787);let el=er.bL;er.l9;let ed=er.ZL;er.bm;let eo=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(er.hJ,{ref:t,className:g("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});eo.displayName=er.hJ.displayName;let ec=n.forwardRef((e,t)=>{let{className:a,children:n,...r}=e;return(0,s.jsxs)(ed,{children:[(0,s.jsx)(eo,{}),(0,s.jsxs)(er.UC,{ref:t,className:g("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r,children:[n,(0,s.jsxs)(er.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(ei.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});ec.displayName=er.UC.displayName;let eu=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:g("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};eu.displayName="DialogHeader";let em=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(er.hE,{ref:t,className:g("text-lg font-semibold leading-none tracking-tight",a),...n})});em.displayName=er.hE.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(er.VY,{ref:t,className:g("text-sm text-muted-foreground",a),...n})}).displayName=er.VY.displayName;var ex=a(9877);let ep=n.forwardRef((e,t)=>{let{className:a,orientation:n="horizontal",decorative:r=!0,...i}=e;return(0,s.jsx)(ex.b,{ref:t,decorative:r,orientation:n,className:g("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",a),...i})});ep.displayName=ex.b.displayName;var ef=a(8507),ey=a(1971),eh=a(7064),eg=a(9187),ew=a(9912),eb=a(1923);function ej(e){let{will:t,type:a,isOpen:i,onClose:l,onUpdate:o}=e,{contract:c,account:u}=m(),[x,p]=(0,n.useState)(""),[f,y]=(0,n.useState)(""),[h,g]=(0,n.useState)(""),[w,j]=(0,n.useState)(""),N=async()=>{if(c&&x){j("deposit");try{let e=await c.depositToWill(t.id,{value:r.g5(x)});d.oR.loading("Depositing funds...",{id:"deposit"}),await e.wait(),d.oR.success("Funds deposited successfully!",{id:"deposit"}),p(""),o()}catch(e){console.error("Error depositing:",e),d.oR.error(e.reason||"Failed to deposit funds",{id:"deposit"})}finally{j("")}}},v=async()=>{if(c&&f){j("withdraw");try{let e=await c.withdrawFromWill(t.id,r.g5(f));d.oR.loading("Withdrawing funds...",{id:"withdraw"}),await e.wait(),d.oR.success("Funds withdrawn successfully!",{id:"withdraw"}),y(""),o()}catch(e){console.error("Error withdrawing:",e),d.oR.error(e.reason||"Failed to withdraw funds",{id:"withdraw"})}finally{j("")}}},k=async()=>{if(c&&h&&es.PW(h)){j("setExecutor");try{let e=await c.setExecutor(t.id,h);d.oR.loading("Setting new executor...",{id:"setExecutor"}),await e.wait(),d.oR.success("Executor updated successfully!",{id:"setExecutor"}),g(""),o()}catch(e){console.error("Error setting executor:",e),d.oR.error(e.reason||"Failed to set executor",{id:"setExecutor"})}finally{j("")}}},C=async()=>{if(c){j("confirm");try{let e=await c.confirmExecutionCondition(t.id);d.oR.loading("Confirming execution condition...",{id:"confirm"}),await e.wait(),d.oR.success("Execution condition confirmed!",{id:"confirm"}),o()}catch(e){console.error("Error confirming execution:",e),d.oR.error(e.reason||"Failed to confirm execution",{id:"confirm"})}finally{j("")}}},T=async()=>{if(c){j("execute");try{let e=await c.executeWill(t.id);d.oR.loading("Executing will...",{id:"execute"}),await e.wait(),d.oR.success("Will executed successfully!",{id:"execute"}),o()}catch(e){console.error("Error executing will:",e),d.oR.error(e.reason||"Failed to execute will",{id:"execute"})}finally{j("")}}},E=async()=>{if(c){j("deactivate");try{let e=await c.deactivateWill(t.id);d.oR.loading("Deactivating will...",{id:"deactivate"}),await e.wait(),d.oR.success("Will deactivated successfully!",{id:"deactivate"}),o()}catch(e){console.error("Error deactivating will:",e),d.oR.error(e.reason||"Failed to deactivate will",{id:"deactivate"})}finally{j("")}}};return(0,s.jsx)(el,{open:i,onOpenChange:l,children:(0,s.jsxs)(ec,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)(eu,{children:(0,s.jsxs)(em,{className:"flex items-center gap-2",children:[(0,s.jsx)(L.A,{className:"w-5 h-5"}),"Will #",t.id," Details"]})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(I,{children:[(0,s.jsx)(B,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(M,{className:"text-lg",children:"Status & Information"}),t.isExecuted?(0,s.jsx)(P,{variant:"secondary",className:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300",children:"Executed"}):t.isActive?t.executionConfirmed?(0,s.jsx)(P,{variant:"secondary",className:"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300",children:"Execution Confirmed"}):(0,s.jsx)(P,{variant:"default",children:"Active"}):(0,s.jsx)(P,{variant:"secondary",className:"bg-gray-100 dark:bg-gray-800/50 text-gray-800 dark:text-gray-300",children:"Inactive"})]})}),(0,s.jsxs)(O,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(X,{className:"flex items-center gap-2",children:[(0,s.jsx)(U.A,{className:"w-4 h-4"}),"Current Balance"]}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[Number.parseFloat(r.ck(t.balance)).toFixed(4)," tCORE2"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(X,{className:"flex items-center gap-2",children:[(0,s.jsx)(ef.A,{className:"w-4 h-4"}),"Created"]}),(0,s.jsx)("div",{className:"text-sm text-slate-600",children:new Date(1e3*t.createdAt).toLocaleString()})]})]}),(0,s.jsx)(ep,{}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(X,{children:"Description"}),(0,s.jsx)("p",{className:"text-sm text-slate-600 bg-slate-50 dark:bg-gray-900 p-3 rounded-lg",children:t.description})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(X,{className:"flex items-center gap-2",children:[(0,s.jsx)(K.A,{className:"w-4 h-4"}),"Testator"]}),(0,s.jsx)("div",{className:"font-mono text-sm bg-slate-50 dark:bg-gray-900 p-2 rounded",children:t.testator})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(X,{className:"flex items-center gap-2",children:[(0,s.jsx)(ey.A,{className:"w-4 h-4"}),"Executor"]}),(0,s.jsx)("div",{className:"font-mono text-sm bg-slate-50 dark:bg-gray-900 p-2 rounded",children:t.executor})]})]})]})]}),(0,s.jsxs)(I,{children:[(0,s.jsx)(B,{children:(0,s.jsxs)(M,{className:"flex items-center gap-2",children:[(0,s.jsx)(ee.A,{className:"w-5 h-5"}),"Beneficiaries (",t.beneficiaries.length,")"]})}),(0,s.jsx)(O,{children:(0,s.jsx)("div",{className:"space-y-3",children:t.beneficiaries.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-gray-900 rounded-lg",children:[(0,s.jsx)("div",{className:"font-mono text-sm",children:e}),(0,s.jsxs)(P,{variant:"outline",children:[t.shares[a],"%"]})]},a))})})]}),"testator"===a&&(null==u?void 0:u.toLowerCase())===t.testator.toLowerCase()&&(0,s.jsxs)(I,{children:[(0,s.jsx)(B,{children:(0,s.jsxs)(M,{className:"flex items-center gap-2",children:[(0,s.jsx)(eh.A,{className:"w-5 h-5"}),"Testator Actions"]})}),(0,s.jsx)(O,{className:"space-y-4",children:t.isActive&&!t.isExecuted&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(X,{children:"Deposit Funds"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(H,{type:"number",step:"0.001",placeholder:"Amount in tCORE2",value:x,onChange:e=>p(e.target.value)}),(0,s.jsxs)(b,{onClick:N,disabled:!x||"deposit"===w,children:[(0,s.jsx)(et.A,{className:"w-4 h-4 mr-2"}),"deposit"===w?"Depositing...":"Deposit"]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(X,{children:"Withdraw Funds"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(H,{type:"number",step:"0.001",placeholder:"Amount in tCORE2",value:f,onChange:e=>y(e.target.value)}),(0,s.jsxs)(b,{onClick:v,disabled:!f||"withdraw"===w,variant:"outline",children:[(0,s.jsx)(eg.A,{className:"w-4 h-4 mr-2"}),"withdraw"===w?"Withdrawing...":"Withdraw"]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(X,{children:"Change Executor"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(H,{placeholder:"New executor address",value:h,onChange:e=>g(e.target.value),className:"font-mono"}),(0,s.jsxs)(b,{onClick:k,disabled:!h||"setExecutor"===w,variant:"outline",children:[(0,s.jsx)(ey.A,{className:"w-4 h-4 mr-2"}),"setExecutor"===w?"Setting...":"Set"]})]})]}),(0,s.jsx)(ep,{}),(0,s.jsxs)(b,{onClick:E,disabled:"deactivate"===w,variant:"destructive",className:"w-full",children:[(0,s.jsx)(ew.A,{className:"w-4 h-4 mr-2"}),"deactivate"===w?"Deactivating...":"Deactivate Will"]})]})})]}),"executor"===a&&(null==u?void 0:u.toLowerCase())===t.executor.toLowerCase()&&(0,s.jsxs)(I,{children:[(0,s.jsx)(B,{children:(0,s.jsxs)(M,{className:"flex items-center gap-2",children:[(0,s.jsx)(ey.A,{className:"w-5 h-5"}),"Executor Actions"]})}),(0,s.jsx)(O,{className:"space-y-4",children:t.isActive&&!t.isExecuted&&(0,s.jsx)(s.Fragment,{children:t.executionConfirmed?(0,s.jsxs)(b,{onClick:T,disabled:"execute"===w,className:"w-full bg-green-600 hover:bg-green-700",children:[(0,s.jsx)(eb.A,{className:"w-4 h-4 mr-2"}),"execute"===w?"Executing...":"Execute Will"]}):(0,s.jsxs)(b,{onClick:C,disabled:"confirm"===w,className:"w-full",children:[(0,s.jsx)(ey.A,{className:"w-4 h-4 mr-2"}),"confirm"===w?"Confirming...":"Confirm Execution Condition"]})})})]})]})]})})}var eN=a(475),ev=a(9013),ek=a(1218);function eC(e){let{will:t,type:a,onUpdate:i}=e,[l,d]=(0,n.useState)(!1),o=e=>"".concat(e.slice(0,6),"...").concat(e.slice(-4));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(I,{className:"hover:shadow-lg transition-shadow duration-200",children:[(0,s.jsx)(B,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)(M,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(L.A,{className:"w-5 h-5"}),"Will #",t.id]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[t.isExecuted?(0,s.jsx)(eN.A,{className:"w-4 h-4 text-green-600"}):t.isActive?t.executionConfirmed?(0,s.jsx)(ev.A,{className:"w-4 h-4 text-orange-600"}):(0,s.jsx)(eN.A,{className:"w-4 h-4 text-blue-600"}):(0,s.jsx)(ew.A,{className:"w-4 h-4 text-gray-600"}),t.isExecuted?(0,s.jsx)(P,{variant:"secondary",className:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300",children:"Executed"}):t.isActive?t.executionConfirmed?(0,s.jsx)(P,{variant:"secondary",className:"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300",children:"Execution Confirmed"}):(0,s.jsx)(P,{variant:"default",children:"Active"}):(0,s.jsx)(P,{variant:"secondary",className:"bg-gray-100 dark:bg-gray-800/50 text-gray-800 dark:text-gray-300",children:"Inactive"})]})]})}),(0,s.jsxs)(O,{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm text-slate-600 dark:text-gray-400 line-clamp-2",children:t.description}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-slate-500",children:"Balance:"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(U.A,{className:"w-4 h-4"}),(0,s.jsxs)("span",{className:"font-medium",children:[Number.parseFloat(r.ck(t.balance)).toFixed(4)," tCORE2"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-slate-500",children:"Beneficiaries:"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(ee.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:t.beneficiaries.length})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-slate-500",children:"Created:"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(ef.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:new Date(1e3*t.createdAt).toLocaleDateString()})]})]}),"testator"===a?(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-slate-500",children:"Executor:"}),(0,s.jsx)("span",{className:"font-mono text-xs",children:o(t.executor)})]}):(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-slate-500",children:"Testator:"}),(0,s.jsx)("span",{className:"font-mono text-xs",children:o(t.testator)})]})]}),(0,s.jsxs)(b,{variant:"outline",className:"w-full",onClick:()=>d(!0),children:[(0,s.jsx)(ek.A,{className:"w-4 h-4 mr-2"}),"View Details"]})]})]}),(0,s.jsx)(ej,{will:t,type:a,isOpen:l,onClose:()=>d(!1),onUpdate:i})]})}var eT=a(2797),eE=a(6806);function eA(e){let{type:t}=e,{contract:a,account:r,isCorrectNetwork:i}=m(),[l,d]=(0,n.useState)([]),[o,c]=(0,n.useState)(!0),u=async()=>{if(!a||!r||!i){c(!1);return}try{c(!0);let e=[];e="testator"===t?await a.getWillsByTestator(r):await a.getWillsByExecutor(r);let s=await Promise.all(e.map(async e=>{let t=await a.getWillDetails(e),s=t.beneficiaries_.map(e=>e.beneficiaryAddress),n=t.beneficiaries_.map(e=>Number(e.sharePercentage));return{id:Number(e),testator:t.testator,executor:t.executor,description:t.description,isActive:t.isActive,isExecuted:t.isExecuted,balance:t.totalBalance.toString(),beneficiaries:s,shares:n,createdAt:Number(t.creationTimestamp),executionConfirmed:t.isExecutionConfirmed}}));d(s)}catch(e){console.error("Error fetching wills:",e)}finally{c(!1)}};return((0,n.useEffect)(()=>{u()},[a,r,i,t]),o)?(0,s.jsx)(I,{children:(0,s.jsx)(O,{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eT.A,{className:"w-6 h-6 animate-spin"}),(0,s.jsx)("span",{children:"Loading wills..."})]})})}):r&&i?0===l.length?(0,s.jsx)(I,{children:(0,s.jsx)(O,{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(eE.A,{className:"w-12 h-12 mx-auto text-slate-400 mb-4"}),(0,s.jsx)("p",{className:"text-slate-600 dark:text-gray-400",children:"testator"===t?"You haven't created any wills yet.":"You are not assigned as an executor for any wills."})]})})}):(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:l.map(e=>(0,s.jsx)(eC,{will:e,type:t,onUpdate:u},e.id))}):(0,s.jsx)(I,{children:(0,s.jsx)(O,{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(eE.A,{className:"w-12 h-12 mx-auto text-slate-400 mb-4"}),(0,s.jsx)("p",{className:"text-slate-600 dark:text-gray-400",children:"Please connect your wallet and switch to tCORE Testnet to view wills."})]})})})}var eR=a(6468);let eW=eR.bL,eF=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(eR.B8,{ref:t,className:g("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...n})});eF.displayName=eR.B8.displayName;let e_=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(eR.l9,{ref:t,className:g("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...n})});e_.displayName=eR.l9.displayName;let eS=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(eR.UC,{ref:t,className:g("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...n})});eS.displayName=eR.UC.displayName;var eD=a(8844);let eI=e=>{let{...t}=e,{theme:a="system"}=(0,J.D)();return(0,s.jsx)(d.l$,{theme:a,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};function eB(){let[e,t]=(0,n.useState)("my-wills");return(0,s.jsx)(x,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-gray-950 dark:to-black",children:[(0,s.jsx)(Z,{}),(0,s.jsxs)("main",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,s.jsxs)("div",{className:"mb-8 text-center",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 dark:text-gray-100 mb-4",children:"Will Transfer DAO"}),(0,s.jsx)("p",{className:"text-lg text-slate-600 dark:text-gray-400 max-w-2xl mx-auto",children:"Create and manage digital wills on the blockchain. Secure, transparent, and decentralized estate planning."})]}),(0,s.jsx)(I,{className:"shadow-lg border-0 bg-white/80 dark:bg-gray-900/90 backdrop-blur-sm",children:(0,s.jsx)(O,{className:"p-6",children:(0,s.jsxs)(eW,{value:e,onValueChange:t,className:"w-full",children:[(0,s.jsxs)(eF,{className:"grid w-full grid-cols-3 mb-8",children:[(0,s.jsxs)(e_,{value:"my-wills",className:"flex items-center gap-2",children:[(0,s.jsx)(L.A,{className:"w-4 h-4"}),"My Wills"]}),(0,s.jsxs)(e_,{value:"create-will",className:"flex items-center gap-2",children:[(0,s.jsx)(et.A,{className:"w-4 h-4"}),"Create Will"]}),(0,s.jsxs)(e_,{value:"executor-duties",className:"flex items-center gap-2",children:[(0,s.jsx)(eD.A,{className:"w-4 h-4"}),"Executor Duties"]})]}),(0,s.jsx)(eS,{value:"my-wills",className:"space-y-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-gray-100 mb-4",children:"Your Wills"}),(0,s.jsx)("p",{className:"text-slate-600 dark:text-gray-400 mb-6",children:"Manage wills you've created as a testator."}),(0,s.jsx)(eA,{type:"testator"})]})}),(0,s.jsx)(eS,{value:"create-will",className:"space-y-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-gray-100 mb-4",children:"Create New Will"}),(0,s.jsx)("p",{className:"text-slate-600 dark:text-gray-400 mb-6",children:"Create a new digital will with beneficiaries and an executor."}),(0,s.jsx)(en,{})]})}),(0,s.jsx)(eS,{value:"executor-duties",className:"space-y-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-gray-100 mb-4",children:"Executor Duties"}),(0,s.jsx)("p",{className:"text-slate-600 dark:text-gray-400 mb-6",children:"Manage wills where you are assigned as the executor."}),(0,s.jsx)(eA,{type:"executor"})]})})]})})})]}),(0,s.jsx)(eI,{position:"bottom-right"})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[550,818,64,358],()=>t(5743)),_N_E=e.O()}]);